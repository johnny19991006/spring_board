<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
    <title>오늘의 주가</title>
</head>
<body>
<div class="container">
    <div th:replace="nav.html :: fragment-nav"></div>

    <!-- Display an error message if there is an error attribute in the model -->
    <div th:if="${error}" class="alert alert-danger" role="alert" th:text="${error}"></div>

    <div class="h4 pb-2 mb-4 text-danger border-bottom border-info"></div>
    <div><span>조회시간: </span><span th:text="${jobDate}"></span></div>

    <!-- Only display stock information if equity object is not null -->
    <div th:if="${equity != null}" class="card">
        <div class="card-header">
            <h2 th:text="${stockName} ?: 'Unknown Stock'">Stock Information</h2> <!-- Display stock name or a default message -->
        </div>
        <div class="card-body">
            <div>
                <span class="fs-1" th:text="${equity.stck_prpr} + '원'">Price</span>
                <span th:text="${equity.prdy_vrss} + '원'" th:style="${equity.prdy_vrss_sign < '3' ? 'color:red' : (equity.prdy_vrss_sign > '3' ? 'color:blue' : 'color:black')}">Change</span>
                <span th:text="${equity.prdy_ctrt} + '%'" th:style="${equity.prdy_vrss_sign < '3' ? 'color:red' : (equity.prdy_vrss_sign > '3' ? 'color:blue' : 'color:black')}">Rate</span>
            </div>
        </div>
    </div>

    <!-- Display an error or info message if equity data is not available -->
    <div th:if="${equity == null}" class="alert alert-info" role="alert">
        No data available for the specified stock.
    </div>

    <!-- Additional content only displayed if equity is not null -->
    <div th:if="${equity != null}" class="card">
        <div class="card-body">
            <table class="table">
                <tbody>
                <tr>
                    <td>PER</td>
                    <td th:text="${equity.per}">N/A</td>
                    <td>EPS</td>
                    <td th:text="${equity.eps}">N/A</td>
                </tr>
                <tr>
                    <td>PBR</td>
                    <td th:text="${equity.pbr}">N/A</td>
                    <td>BPS</td>
                    <td th:text="${equity.bps}">N/A</td>
                </tr>
                </tbody>
            </table>
            <div class="p-2 mt-3 mb-4 bg-light border">
                <h4 class="text-center">댓글 긍부정 판단</h4>
                <p class="text-center">Positive sentiment is high for this stock. Overall opinion is positive.</p>
                <div class="progress" style="height: 25px;">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">70/100 points</div>
                </div>
                <p class="text-center mt-2">Positive opinions: 30</p>
            </div>
        </div>
    </div>
</div>
</body>
</html>
